# Apache Shiro术语

请花2分钟阅读和理解这些--这是非常重要的。这里出现的术语和概念会被引用在文档中的任何地方，并且可以大大简化您对Shiro和安全的理解。

安全管理里的一些术语可能真的会令人感到困惑。这里将更简单地说明一些核心概念，以便于了解它们是如何在Shiro的API里体现的：

* **认证（Authentication）**

认证是验证主体身份（Subject's identity）的过程--基本上就是证明谁是谁的过程。当认证成功时，应用程序就可以信任这个主体（Subject），然后进行后续的操作。

* **授权（Authorization）**

授权，也称之为访问控制（Access Control），是确定用户/主体（Subject）是否被允许做某事的过程。通常通过审查和解释一个主体的角色和权限（见下文），然后决定允许还是拒绝对所请求的资源或功能的访问。

* **密码/密文（Cipher）**

密码是用于执行加密或解密的算法。该算法通常依赖于密钥。并且加密是基于密钥而且变化的，若没有它，解密是很困雄的。

密码有不同的类型。分组密码（Block Ciphers）通常以固定的分组长度作为基本的处理单元，而序列密码/流密码（Stream Ciphers）使用连续的符号流进行工作。对称密码（Symmetric Ciphers）使用相同的密钥进行加密和解密，而非对称密码（Asymmetric Ciphers）使用不同的密钥。如果非对称密码中的密钥不能从另一个密钥里获得，则可以创建公钥/私钥对。

* **凭证（Credential）**

凭证是验证用户/主体的身份的信息。一个（或多个）凭证是跟随主体标识（Principal）一起传递的，在认证期间，用于验证用户/主体（Subject）是否已被关联。凭证通常是非常隐秘的，只有特定用户/主体（Subject）才知道，例如密码（password）抑或PGP（Pretty Good Privacy）密钥抑或生物特征属性抑或类似的机制。

这里的思路是，对于主体标识（Principal），只有一个人知道与该主体标识（Principal）配对的正确的凭证。如果当前用户/主体（Subject）提供了正确的凭证，则系统可以假定和信任当前用户/主体（Subject）是系统里已注册好的。凭证类型的安全程度越高，越是值得信任（例如，生物特征签名 > 密码）。

* **加密技术（Cryptography）**

加密技术是通过对原文进行隐藏或将其转换成无意义的信息来达到保护作用，以避免信息被窃取。Shiro专注于使用加密技术中的两种核心技术：使用密码（ciphers）即使用公钥或私钥的方式来加密数据（例如，邮件），以及使用哈希（hashes）（也称为消息摘要--message digests）来对数据（例如，密码--passwords）进行不可逆的加密。

* **哈希（Hash）**

哈希函数是对输入源（有时称为消息--message）进行单向的、不可逆的转换，将其转换为被编码的哈希值（有时称为消息摘要--message digest）。它通常用于密码、数字指纹或具有底层字节数组的数据。

* **权限（Permission）**

在Shiro中，权限是指一个描述应用程序中原始功能的声明。权限是安全领域里最底层的概念。他们只定义了应用程序可以做什么。他们不描述“谁”能够执行这些操作。权限只是一个行为的声明，再无其他意义了。

以下是一些权限的示例：

> * 打开文件
> * 查看/user/list页面
> * 打印文档
> * 删除jsmith用户

* **主体标识（Principal）**

Principal是应用程序用户（主体Subject）的标识属性。“标识属性”可能是应用程序中任何有意义的内容--用户名（username）、姓氏（surname）、名字（given name）、身份证号、用户ID等。

Shiro同时引入了主体（Subject）的主要标识（primary principal）。主要标识指在整个应用程序中能够唯一标识主体（Subject）的。完美的主要标识可以是用户名或用户ID，它们通常是RDBMS里的用户表主键。在应用程序中用户（主体Subject）只有一个主要标识。简单来说，Principal是Subject的标识，一般情况下是唯一标识，比如用户名。

* **领域（Realm）**

Realm是指可以访问到应用程序中的安全数据（如用户、角色和权限）的组件。它可以想象成安全相关的DAO（Data Access Object）。Realm将应用程序本身的数据转换成Shiro所理解的格式，为此Shiro提供了一个易于理解的Subject编程API，无论是存在多少个数据源还是数据本身也是一个应用程序。

Realm通常与数据源（例如关系数据库、LDAP目录、文件系统或其他类似资源）具有1对1的对应关系。因此，Realm接口的实现使用特定的数据源API（例如JDBC、文件IO、Hibernate或JPA、或其他的Data Access API）来获取授权数据（如角色、权限等）。

* **角色（Role）**

角色在不同的系统里会有不同的定义。在很多应用中，角色是一个模糊概念，被隐含地定义为安全策略。Shiro更倾向于将角色简单地理解为一个被命名的权限集合（a named collection of Permissions）。也就是说，角色聚合一个或多个权限声明。

* **会话（Session）**

会话是指在一定时间周期内与单个用户/主体（Subject）相关联的状态数据上下文。在主体使用应用程序时，可以在会话期间add/read/remove数据。当用户/主体（Subject）退出应用程序或由于不活动导致超时时，会话会被终止。

对于熟悉HttpSession的人来说，Shiro会话具有相同的目的，所不同的是Shiro会话可以在任何环境中使用，即使没有Servlet容器或EJB容器。

* **主体（Subject）**

主体（_Subject_）是一个奇特的安全术语，基本上意味着应用程序用户的安全视图。主体（Subject）并不总是表示一个人，它还可以代表一个调用您的应用程序的外部进程，或者一个在一定时间周期里执行某些事情的守护进程（如cron作业）。基本上，它是指任何在应用程序里做某些事的实体。
